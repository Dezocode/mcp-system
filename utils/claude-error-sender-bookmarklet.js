// Bookmarklet version - copy this entire line and save as a bookmark
javascript:(function(){const errorLog=prompt('Paste your error log here:');if(!errorLog)return;class ClaudeErrorSender{constructor(){this.errors=[]}parseErrorLog(logText){const lines=logText.split('\n');const errors=[];let i=0;while(i<lines.length){const line=lines[i];if(line.trim()===''){i++;continue}if(line==='App Errors'||line==='Test Pipeline'||(line.trim()&&!line.match(/^\d{1,2}:\d{2}:\d{2}\s*[AP]M$/)&&!line.startsWith('Unexpected error')&&!line.startsWith('This is a test'))){const category=line.trim();i++;if(i<lines.length){const timestampLine=lines[i];const timeMatch=timestampLine.match(/^(\d{1,2}:\d{2}:\d{2}\s*[AP]M)$/);if(timeMatch){const timestamp=timeMatch[1];i++;if(i<lines.length){const message=lines[i].trim();errors.push({category:category,message:message,timestamp:timestamp})}}}}i++}this.errors=errors;return errors}formatForClaude(){if(this.errors.length===0)return'';let output='I have the following error log that needs analysis:\n\n```\n';output+=`Total Errors: ${this.errors.length}\n\n`;const errorsByCategory={};this.errors.forEach(error=>{if(!errorsByCategory[error.category]){errorsByCategory[error.category]=[]}errorsByCategory[error.category].push(error)});for(const[category,categoryErrors]of Object.entries(errorsByCategory)){output+=`${category} (${categoryErrors.length} occurrences):\n`;categoryErrors.slice(0,5).forEach(error=>{output+=`  ${error.timestamp} - ${error.message.substring(0,100)}${error.message.length>100?'...':''}\n`});if(categoryErrors.length>5){output+=`  ... and ${categoryErrors.length-5} more\n`}output+='\n'}output+='```\n\n';output+='Can you help me understand what\'s causing these errors and how to fix them?';return output}async sendToClaude(){this.parseErrorLog(errorLog);const formattedText=this.formatForClaude();const textarea=document.querySelector('textarea[placeholder*="Message"]')||document.querySelector('textarea[placeholder*="message"]')||document.querySelector('div[contenteditable="true"]');if(textarea){textarea.focus();if(textarea.tagName==='TEXTAREA'){textarea.value=formattedText;textarea.dispatchEvent(new Event('input',{bubbles:true}))}else{textarea.textContent=formattedText;textarea.dispatchEvent(new Event('input',{bubbles:true}))}setTimeout(()=>{const sendButton=document.querySelector('button[aria-label*="Send"]')||document.querySelector('button[aria-label*="send"]')||Array.from(document.querySelectorAll('button')).find(btn=>btn.textContent.includes('Send')||btn.innerHTML.includes('send'));if(sendButton&&!sendButton.disabled){sendButton.click();alert('Error log sent to Claude!')}else{alert('Message pasted. Please press Enter to send.')}},500)}else{navigator.clipboard.writeText(formattedText);alert('Error log formatted and copied to clipboard. Please paste it into Claude.')}}}const sender=new ClaudeErrorSender();sender.sendToClaude()})();